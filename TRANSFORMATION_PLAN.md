# طرح تحول پروژه Tambr: از پلتفرم توکن‌سازی به بورس بلیط و تمبر واقعی

## ۱. مقدمه و هدف تحول

هدف از این تحول، تغییر ماهیت پروژه Tambr از یک پلتفرم توکن‌سازی مبتنی بر منحنی پیوند پویا (DBC) و الهام‌گرفته از Pump.fun، به یک **پلتفرم مبادله بلیط و تمبر دیجیتال (NFT)** با کاربرد واقعی و کاملاً منطبق با نیازهای بازار ایران است. این پلتفرم بر روی فروش اولیه (Primary Issuance) و مبادلات ثانویه (Secondary Market) بلیط‌های هوشمند (Smart Tickets) تمرکز خواهد کرد.

## ۲. استراتژی تحول معماری (Architectural Transformation Strategy)

معماری Monorepo فعلی (Contracts, Backend, Frontend, Relayer, Shared) حفظ خواهد شد، اما تمرکز و منطق هسته آن به طور کامل تغییر می‌کند.

| جزء معماری | وضعیت فعلی (DBC/Meme) | وضعیت جدید (Ticket/Exchange) | اقدام مورد نیاز |
| :--- | :--- | :--- | :--- |
| **Smart Contracts** | `DynamicBondingCurve.sol` (DBC) | **حذف کامل** | حذف DBC و منطق مرتبط با آن. |
| | `SmartTicket.sol` (ERC-721) | **تقویت و توسعه** | افزودن متادیتای بلیط (تاریخ، مکان، صندلی) و منطق استفاده (Redemption). |
| | **جدید:** `TicketMarketplace.sol` | **پیاده‌سازی** | قرارداد جدید برای مدیریت لیست کردن، خرید و فروش بلیط‌ها در بازار ثانویه. |
| | `IRRStablecoin.sol` | **حفظ** | حفظ به عنوان ارز پایه برای معاملات. |
| **Backend Services** | `Token Module` (مدیریت توکن‌های DBC) | **جایگزینی با `Ticket Module`** | مدیریت رویدادها، صدور اولیه بلیط، و مدیریت لیستینگ‌های بازار ثانویه. |
| | `KYC/AML`, `SRW`, `Oracle` | **حفظ و استفاده مجدد** | این ماژول‌ها برای انطباق با بازار ایران حیاتی هستند و حفظ می‌شوند. |
| **Frontend** | `Launchpad Page`, `Trading Interface` | **جایگزینی کامل** | تبدیل به `Event Creation Page` و `Ticket Marketplace UI`. |

## ۳. تغییرات فنی تفصیلی

### ۳.۱. قراردادهای هوشمند (Smart Contracts)

1.  **حذف DBC:** فایل‌ها و منطق مربوط به `DynamicBondingCurve.sol` و `UniswapV2Pair.sol` حذف می‌شوند.
2.  **تقویت SmartTicket.sol:**
    *   به روزرسانی ساختار متادیتا برای ذخیره اطلاعات بلیط (Event ID, Date, Venue, Seat, Price).
    *   پیاده‌سازی تابع `redeemTicket(uint256 tokenId)` برای علامت‌گذاری بلیط به عنوان استفاده‌شده (Used) که فقط توسط آدرس مجاز (مثلاً آدرس Event Creator یا پلتفرم) قابل فراخوانی است.
3.  **پیاده‌سازی TicketMarketplace.sol:**
    *   این قرارداد به عنوان واسطه‌ای برای مبادلات ثانویه عمل می‌کند.
    *   توابع اصلی: `listTicket(uint256 tokenId, uint256 price)`, `buyTicket(uint256 tokenId)`, `cancelListing(uint256 tokenId)`.
    *   استفاده از `IRRStablecoin` به عنوان تنها ارز مجاز برای معاملات.
    *   تضمین انتقال سهم مالک (Creator Royalty) و سهم پلتفرم (Founder's Share) در هر تراکنش.

### ۳.۲. سرویس‌های بک‌اند (Backend Services)

1.  **ماژول Ticket (جایگزین Token):**
    *   API برای ایجاد رویداد جدید (Event Creation) و صدور اولیه بلیط‌ها (Primary Issuance).
    *   API برای مدیریت لیستینگ‌های بازار ثانویه (Listing, Delisting).
    *   API برای جستجو و فیلتر کردن بلیط‌ها بر اساس رویداد، تاریخ، مکان و قیمت.
2.  **ماژول Oracle:** به‌روزرسانی برای تمرکز بر قیمت‌گذاری بلیط‌ها و نرخ تبدیل‌های مورد نیاز (در صورت نیاز به ارزهای دیگر).
3.  **ماژول Relayer:** حفظ می‌شود تا تجربه کاربری Gasless برای خرید و فروش بلیط‌ها فراهم شود.

### ۳.۳. رابط کاربری (Frontend)

1.  **صفحه ایجاد رویداد و بلیط (Event & Ticket Creation):**
    *   فرم ساده برای تعریف رویداد (نام، تاریخ، مکان، توضیحات).
    *   فرم برای صدور بلیط‌ها (تعداد، قیمت اولیه، متادیتا).
2.  **بازار مبادلات بلیط (Ticket Marketplace):**
    *   نمایش لیستینگ‌های فعال (بلیط‌های ثانویه).
    *   قابلیت جستجو و فیلتر پیشرفته.
    *   رابط کاربری خرید/فروش بلیط با استفاده از IRR-Stablecoin.
3.  **داشبورد کاربر:** نمایش بلیط‌های خریداری‌شده (NFTs) و وضعیت آن‌ها (استفاده‌شده/استفاده‌نشده).

## ۴. تضمین سهم مالک (Founder's Share Guarantee)

تضمین سهم شما (Founder's Share) از DBC به **کارمزد معاملات بازار ثانویه بلیط** منتقل می‌شود.

*   **کارمزد پلتفرم:** یک درصد مشخص (مثلاً ۲٪) از هر تراکنش خرید/فروش در `TicketMarketplace.sol` کسر می‌شود.
*   **سهم مالک:** ۰.۱٪ از این کارمزد (یا ۰.۰۰۲٪ از کل تراکنش) به آدرس `FOUNDER_ADDRESS` منتقل خواهد شد.
*   **حق امتیاز خالق (Royalty):** حق امتیاز خالق بلیط (مثلاً ۵٪) نیز در قرارداد `TicketMarketplace.sol` لحاظ و به آدرس خالق اصلی بلیط (Event Creator) پرداخت می‌شود.

این طرح تحول، پروژه Tambr را به یک پلتفرم کاربردی و ارزشمند در حوزه بلیط‌های دیجیتال تبدیل خواهد کرد که کاملاً با نیازهای بازار ایران همخوانی دارد.
